<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Istio-Envoy Objects Relationship :: Red Hat Service Mesh - Envoy &amp; Istio Control Plane</title>
    <link rel="canonical" href="http://localhost:3000/rhs-build-course/index.html/rh-servicemesh-envoy-crtplane/04-relationship.html">
    <link rel="prev" href="03-flows.html">
    <link rel="next" href="05-envoy.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://localhost:3000/rhs-build-course/index.html">Red Hat Service Mesh - Envoy &amp; Istio Control Plane</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rh-servicemesh-envoy-crtplane" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Red Hat Service Mesh - Envoy &amp; Istio Control Plane</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">1. Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisites">1.1 Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#laboratory">1.2 Laboratory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-jumpapp.html">2. Jump App Deployment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-jumpapp.html#login">2.1 Login in Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-jumpapp.html#github">2.2 Clone GitHub Repository</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-jumpapp.html#jumpappobjects">2.3 Create Jump App Objects in Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-jumpapp.html#test">2.4 Confirm Jump App is already running in Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-jumpapp.html#testapp">2.5 Access to Jump App</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-flows.html">3. Service Mesh Communication Flows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-flows.html#create">3.1 Create Red Hat Service Mesh Traffic Flow objects</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#gw">3.1.1 Gateways</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#vsvc">3.1.2 Virtual Services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#dr">3.1.3 Destination Rules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#services">3.1.4 K8s Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-flows.html#memberrol">3.2 Added a new project to Red Hat Service Mesh Control Plane</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-flows.html#finalsteps">3.3 Final steps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#annotation">3.3.1 Add Istio Sidecar annotation in Jump App deployments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#routes">3.3.2 Configure Routes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-flows.html#test">3.3.3 Confirm Jump App is running again</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-relationship.html">4. Istio-Envoy Objects Relationship</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#previous">4.1 Create a new microservice version</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#reviewing">4.2 Review Red Hat Service Mesh objects</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#dr">4.2.1 Destination Rules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#vsvc">4.2.2 Virtual Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#testvsvc">4.2.2.1 Test Jump App</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#se">4.2.3 Service Entry</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05-envoy.html">5. Envoy Proxy</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-envoy.html#ef">5.1 Envoy Filters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-crtlplane.html">6. Istio Control Plane</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-crtlplane.html#review">6.1 Review consequences of adding a new project to Istio Control Plane</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="06-crtlplane.html#smr">6.1.1 Create <em>ServiceMeshMember</em> Object</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="06-crtlplane.html#np">6.1.2 Review Network Policies Created</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-crtlplane.html#test">6.2 Test <em>Jump App</em></a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="06-crtlplane.html#up">6.2.1 Confirm <em>Jump App</em> is running again</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="06-crtlplane.html#kiali">6.2.2 Visit Kiali</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="07-services.html">7. Istio Global Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="07-services.html#secure">7.1 Secure Gateways</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="07-services.html#cert">7.1.1 Generate a Custom Certificate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="07-services.html#addcert">7.1.2 Create in Istio the Custom Certificate using SDS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="07-services.html#gw">7.1.3 Configure Gateway</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="07-services.html#route">7.1.4 Modify Route</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="07-services.html#test">7.1.5 Test HTTPS connections</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat Service Mesh - Envoy &amp; Istio Control Plane</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Red Hat Service Mesh - Envoy & Istio Control Plane</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Red Hat Service Mesh - Envoy & Istio Control Plane</a></li>
    <li><a href="04-relationship.html">4. Istio-Envoy Objects Relationship</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/acidonper/rh-service-mesh-v2-istio-crtlplane/edit/master/documentation/modules/ROOT/pages/04-relationship.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Istio-Envoy Objects Relationship</h1>
<div class="sect1">
<h2 id="previous"><a class="anchor" href="#previous"></a>Create a new microservice version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First at all, it is required to create a new microservice <em>deployment</em> and a <em>service</em> objects for being able to work with different micro versions in Service Mesh.</p>
</div>
<div class="paragraph">
<p>Please, create the previous object through the respective Openshift template executing the following command:</p>
</div>
<div class="listingblock lines_space console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc process -f 04-istio-envoy-relationship/00-istio-envoy-rel-micro-version.yaml --param-file=params.env --ignore-unknown-parameters | oc create -f - -n &lt;user_namespace&gt;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-new-micro-version-ok.png" alt="jump app new micro version ok">
</div>
<div class="title">Figure 1. New Micro Version Created</div>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc patch deployment back-golang-v2 -p '{"spec":{"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"}}}}}' -n &lt;user_namespace&gt;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-back-golang-v2-depl-patch.png" alt="jump app back golang v2 depl patch">
</div>
<div class="title">Figure 2. Front Patched</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reviewing"><a class="anchor" href="#reviewing"></a>Review Red Hat Service Mesh objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a new Service Mesh object is created in a specific namespace, a set of configurations blocks are added to Envoy proxies in order to be able to apply these rules in the mesh traffic flow.</p>
</div>
<div class="paragraph">
<p>In this step, you will review how these objects affect Envoy proxies getting their configuration from Envoy itself. In order to be able to obtain some information from pods, it is required to obtain pods names before starting this section:</p>
</div>
<div class="listingblock lines_7 console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc get pods</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-pods-2-v2.png" alt="jump app pods 2 v2">
</div>
<div class="title">Figure 3. Jump App Pods Mesh</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Please, replace <strong>&lt;user_namespace&gt;</strong> and <strong>&lt;back-golang-pod_id&gt;</strong> with the values provided by the Instructor at the beginning of this tutorial or values obtained from openshift cluster.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="dr"><a class="anchor" href="#dr"></a>Destination Rules</h3>
<div class="paragraph">
<p>Before applying changes, please save the original Envoy proxy configuration following next steps:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc exec &lt;back-golang-pod_id&gt;&lt;back-golang-pod_id&gt; -c istio-proxy -n &lt;user_namespace&gt; curl localhost:15000/config_dump &gt; destination-rule-config-init.json</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-dr-golang.png" alt="jump app dr golang">
</div>
<div class="title">Figure 4. Envoy Configuration</div>
</div>
<div class="paragraph">
<p>It is time to modify a <em>Destination Rule</em> in order to see how it is implemented in Envoy proxy configuration through the respective configuration blocks:</p>
</div>
<div class="listingblock lines_space console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc process -f 04-istio-envoy-relationship/00-istio-envoy-rel-drs.yaml --param-file=params.env --ignore-unknown-parameters | oc apply -f - -n &lt;user_namespace&gt;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-dr-new.png" alt="jump app dr new">
</div>
<div class="title">Figure 5. Modifed <em>Destination Rule</em> Configuration</div>
</div>
<div class="paragraph">
<p>Once this new <em>Destination Rule</em> has been modified, save the custom Envoy proxy configuration following next steps:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc exec &lt;back-golang-pod_id&gt; -c istio-proxy -n &lt;user_namespace&gt; curl localhost:15000/config_dump &gt; destination-rule-config-custom.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, compare both files differences and draw a definitive conclusion:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-dr-compare.png" alt="jump app dr compare">
</div>
</div>
</div>
<div class="sect2">
<h3 id="vsvc"><a class="anchor" href="#vsvc"></a>Virtual Services</h3>
<div class="paragraph">
<p>Before applying changes, please save the original Envoy proxy configuration following next steps:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc exec &lt;back-golang-pod_id&gt;&lt;back-golang-pod_id&gt; -c istio-proxy -n &lt;user_namespace&gt; curl localhost:15000/config_dump &gt; virtual-service-config-init.json</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-vs-golang.png" alt="jump app vs golang">
</div>
<div class="title">Figure 6. Envoy Configuration</div>
</div>
<div class="paragraph">
<p>It is time to modify a <em>Virtual Services</em> in order to see how it is implemented in Envoy proxy configuration through the respective configuration blocks:</p>
</div>
<div class="listingblock lines_space console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc process -f 04-istio-envoy-relationship/01-istio-envoy-rel-vss.yaml --param-file=params.env --ignore-unknown-parameters | oc apply -f - -n &lt;user_namespace&gt;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-vs-new.png" alt="jump app vs new">
</div>
<div class="title">Figure 7. Modifed <em>Virtual Services</em> Configuration</div>
</div>
<div class="paragraph">
<p>Once this new <em>Virtual Services</em> has been modified, save the custom Envoy proxy configuration following next steps:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc exec &lt;back-golang-pod_id&gt; -c istio-proxy -n &lt;user_namespace&gt; curl localhost:15000/config_dump &gt; virtual-service-config-custom.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, compare both files differences and draw a definitive conclusion:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-vs-compare.png" alt="jump app vs compare">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Additionally, perform a GET request using <em>curl</em> in order to test out headers modification
</td>
</tr>
</table>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">curl -k -v <a href="https://back-golang-&lt;user_namespace&gt;.&lt;openshift_apps_domain&gt;/testing" class="bare">https://back-golang-&lt;user_namespace&gt;.&lt;openshift_apps_domain&gt;/testing</a></code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-output hljs" data-lang="output">...
&lt; redirection: istio-envoy-relationship-test
...
{"code":200,"message":"/jump - Greetings from Golang!"}%</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="testvsvc"><a class="anchor" href="#testvsvc"></a>Test Jump App</h4>
<div class="paragraph">
<p>Once the previous objects are applied, it is time to test our services again with a multiple number of connections. For this step, please follow the next steps:</p>
</div>
<div class="paragraph">
<p>Once the Virtual Service rules are applied, visit the <strong>back</strong>, <em>back-golang-&lt;user_namespace&gt;.&lt;openshift_apps_domain&gt;/redirection-test</em>, route via your web browser</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-back-golang-redirect-ok.png" alt="jump app back golang redirect ok">
</div>
<div class="title">Figure 8. Jump App Back Redirection</div>
</div>
<div class="paragraph">
<p>Visit the <strong>front</strong>, <em>front-javascript-&lt;user_namespace&gt;.&lt;openshift_apps_domain&gt;</em>, route via your web browser. In addition, configure <strong>[ 1000 ]</strong> retries with <strong>[ 1 ]</strong> interval and press <strong>[ JUMP ]</strong> and ensure the following message is displaying in your screen</p>
</div>
<div class="literalblock">
<div class="content">
<pre>...{"code":200,"message":"/jump - Greetings from Python!"}</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-front-jumps-ok.png" alt="jump app front jumps ok">
</div>
<div class="title">Figure 9. Jump App Front Web UI Multi Jumps</div>
</div>
<div class="paragraph">
<p><strong>KIALI</strong></p>
</div>
<div class="paragraph">
<p>Jump App is generating traffic flow thanks to the frontend where was defined an specific number of continuous jumps. In order to review the Service Mesh traffic flow in your project, please visit Kiali console <strong>&lt;kiali_url&gt;</strong> (<em>E.g. <a href="https://kiali-istio-system.apps.tutorialrhmesh.sandbox507.opentlc.com" class="bare">https://kiali-istio-system.apps.tutorialrhmesh.sandbox507.opentlc.com</a></em>):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-kiali-v2.png" alt="jump app kiali v2">
</div>
<div class="title">Figure 10. Kiali Console</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="se"><a class="anchor" href="#se"></a>Service Entry</h3>
<div class="paragraph">
<p>Before applying changes, please save the original Envoy proxy configuration following next steps:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc exec &lt;back-golang-pod_id&gt;&lt;back-golang-pod_id&gt; -c istio-proxy -n &lt;user_namespace&gt; curl localhost:15000/config_dump &gt; service-entry-config-init.json</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-se-golang.png" alt="jump app se golang">
</div>
<div class="title">Figure 11. Envoy Configuration</div>
</div>
<div class="paragraph">
<p>It is time to modify a <em>Service Entry</em> in order to see how it is implemented in Envoy proxy configuration through the respective configuration blocks:</p>
</div>
<div class="listingblock lines_space console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc process -f 04-istio-envoy-relationship/02-istio-envoy-rel-ses.yaml --param-file=params.env --ignore-unknown-parameters | oc apply -f - -n &lt;user_namespace&gt;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-se-new.png" alt="jump app se new">
</div>
<div class="title">Figure 12. Modifed <em>Service Entry</em> Configuration</div>
</div>
<div class="paragraph">
<p>Once this new <em>Service Entry</em> has been modified, save the custom Envoy proxy configuration following next steps:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc exec &lt;back-golang-pod_id&gt; -c istio-proxy -n &lt;user_namespace&gt; curl localhost:15000/config_dump &gt; service-entry-config-custom.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, compare both files differences and draw a definitive conclusion:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/jump-app-se-compare.png" alt="jump app se compare">
</div>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-input hljs" data-lang="input">oc rsh back-golang-v1-&lt;pod_id&gt;
curl -k -v <a href="https://www.google.es" class="bare">https://www.google.es</a></code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-output hljs" data-lang="output">...
  &lt;body&gt;
    &lt;div&gt;
      &lt;h1&gt;Application is not available&lt;/h1&gt;
      &lt;p&gt;The application is currently not serving requests at this endpoint. It may not have been started or is still starting.&lt;/p&gt;

      &lt;div class="alert alert-info"&gt;
        &lt;p class="info"&gt;
          Possible reasons you are seeing this page:
        &lt;/p&gt;
        &lt;ul&gt;
          &lt;li&gt;
            &lt;strong&gt;The host doesn't exist.&lt;/strong&gt;
            Make sure the hostname was typed correctly and that a route matching this hostname exists.
          &lt;/li&gt;
          &lt;li&gt;
            &lt;strong&gt;The host exists, but doesn't have a matching path.&lt;/strong&gt;
            Check if the URL path was typed correctly and that the route was created using the desired path.
          &lt;/li&gt;
          &lt;li&gt;
            &lt;strong&gt;Route and path matches, but all pods are down.&lt;/strong&gt;
            Make sure that the resources exposed by this route (pods, services, deployment configs, etc) have at least one pod running.
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Note that the response is generated by Openshift and not by <em>www.google.es</em>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="03-flows.html">3. Service Mesh Communication Flows</a></span>
  <span class="next"><a href="05-envoy.html">5. Envoy Proxy</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
